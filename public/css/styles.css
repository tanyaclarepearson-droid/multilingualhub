/* ================================
   Base & Layout
================================ */
:root {
  --hub-max-w: 1600px;
  --focus: rgba(0,120,255,.65);
}

html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  color: #111;
}

/* Stage centers the interactive layer */
.stage {
  min-height: 100svh;
  display: grid;
  place-items: center;
  padding: clamp(8px, 1.5vw, 18px);
}

/* ================================
   Background (PNG only, safe fallback)
================================ */
.room-bg {
  position: fixed;
  inset: 0;
  background-color: #f5f5f5;  /* ðŸ‘ˆ fallback color */
  background: center/cover no-repeat fixed;
  background-image: url("/images/hub-background.png"); /* PNG only */
  z-index: -1;
}

/* ================================
   Hotspots
================================ */
#hotspotLayer {
  position: relative;
  width: min(100%, var(--hub-max-w));
  margin-inline: auto;
  aspect-ratio: 16/9;
  isolation: isolate; /* ensures tooltips overlay properly */
}

.hotspot {
  position: absolute;
  display: block;
  border: 0;
  background: transparent;
  border-radius: 10px;
  outline: none;
  cursor: pointer;
}

/* Keyboard focus ring */
.hotspot:focus-visible {
  box-shadow: 0 0 0 3px var(--focus);
}

/* Tooltip on hover/focus */
.hotspot:where(:hover, :focus-visible)::after {
  content: attr(aria-label);
  position: absolute;
  left: 50%;
  top: -10px;
  transform: translate(-50%, -100%);
  padding: .35rem .55rem;
  font-size: .85rem;
  color: #fff;
  background: rgba(0,0,0,.78);
  border-radius: .5rem;
  white-space: nowrap;
  pointer-events: none;
  z-index: 3;
}
.hotspot:where(:hover, :focus-visible)::before {
  content: "";
  position: absolute;
  left: 50%;
  top: -10px;
  transform: translate(-50%,-60%);
  width: 8px;
  height: 8px;
  background: rgba(0,0,0,.78);
  rotate: 45deg;
  z-index: 2;
}

/* ================================
   Dev Mode (optional debug)
================================ */
.dev .hotspot {
  outline: 2px dashed rgba(0,0,0,.18);
  background: rgba(0,0,0,.02);
}

/* Pulse animation for discoverability */
@keyframes hub-pulse {
  0%   { box-shadow: 0 0 0 0 rgba(0,120,255,.35); }
  70%  { box-shadow: 0 0 0 18px rgba(0,120,255,0); }
  100% { box-shadow: 0 0 0 0 rgba(0,120,255,0); }
}
.pulse-once {
  animation: hub-pulse 1.6s ease-out 0s 2;
  border-radius: 10px;
}
@media (prefers-reduced-motion: reduce) {
  .pulse-once { animation: none; }
}

/* ================================
   Utility
================================ */
.skip {
  position: absolute;
  left: -9999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}
.skip:focus {
  position: static;
  width: auto;
  height: auto;
  display: inline-block;
  margin: 8px;
}
/* --- Hotspot base --- */
.stage { position: relative; min-height: 100vh; }
.room-bg { position: absolute; inset: 0; background: url("/images/hub-background.webp") center/cover no-repeat; }
#hotspotLayer { position: absolute; inset: 0; z-index: 2; }

.hotspot{
  position:absolute; border:0; background: transparent;
  background-size: contain; background-repeat:no-repeat; background-position:center;
  outline: none; cursor: pointer;
  /* optional: a gentle glow so they pop a bit */
  filter: drop-shadow(0 2px 4px rgba(0,0,0,.25));
}

/* If you still want a temporary visual while testing, toggle this on/off */
/* .hotspot { background-color: rgba(255,0,0,.1); border: 1px dashed rgba(160,0,0,.3); } */

/* --- Map hotspot IDs to images --- */
/* Make sure the IDs in /data/hotspots.json match these values exactly. */

.hotspot[data-id="jukebox"]            { background-image:url("/images/jukebox.png"); }
.hotspot[data-id="megaphone"]          { background-image:url("/images/megaphone.png"); }
.hotspot[data-id="recording-desk"]     { background-image:url("/images/recording-desk.png"); }
.hotspot[data-id="objectives-screen"]  { background-image:url("/images/objectives-screen.png"); }
.hotspot[data-id="toolkit-chest"]      { background-image:url("/images/toolkit-chest.png"); }
.hotspot[data-id="flower-vase"]        { background-image:url("/images/flower-vase.png"); }
.hotspot[data-id="papel-picado"]       { background-image:url("/images/papel-picado.png"); }
.hotspot[data-id="origami-cranes"]     { background-image:url("/images/origami-cranes.png"); }
.hotspot[data-id="green-screen"]       { background-image:url("/images/green-screen.png"); }
.hotspot[data-id="delac-marquee"]      { background-image:url("/images/delac-marquee.png"); }
.hotspot[data-id="elevation-laptop"]   { background-image:url("/images/elevation-laptop.png"); }
.hotspot[data-id="elpac-goals"]        { background-image:url("/images/elpac-goals.png"); }

/* AVID pennants (if you place them as hotspots) */
.hotspot[data-id="avid-tk-2"]          { background-image:url("/images/avid-tk-2.png"); }
.hotspot[data-id="avid-3-5"]           { background-image:url("/images/avid-3-5.png"); }
.hotspot[data-id="avid-6-8"]           { background-image:url("/images/avid-6-8.png"); }
.hotspot[data-id="avid-9-12"]          { background-image:url("/images/avid-9-12.png"); }

/* Optional accessibility focus */
.hotspot:focus-visible { outline: 3px solid #1e90ff; outline-offset: 2px; }
/* Overlay layer sits above background, below UI */
.overlay-layer {
  position: absolute;
  inset: 0;
  z-index: 2;
  pointer-events: none;
}

.ov { position: absolute; height: auto; }

/* Quickly-tunable examples (percent of the stage) */
.ov-jukebox       { left: 15%; top: 63%; width: 12%; }
.ov-megaphone     { left: 74%; top: 54%; width: 10%; }
.ov-green-screen  { left: 91%; top: 57%; width: 10%; transform: translateX(-100%); }
.ov-recording-desk{ left: 86%; top: 73%; width: 12%; transform: translateX(-100%); }
.ov-origami       { left: 61%; top: 10%; width: 16%; }
.ov-papel         { left: 52%; top: 28%; width: 25%; }
.ov-toolkit       { left: 21%; top: 61%; width: 11%; }
.ov-objectives    { left: 23%; top: 24%; width: 18%; }
.ov-elpac         { left: 43%; top: 70%; width: 12%; }
.ov-elevation     { left: 64%; top: 75%; width: 14%; transform: translateX(-50%); }
.ov-delac         { left: 76%; top: 10%; width: 20%; transform: rotate(-8deg); }
.ov-avid-tk2      { left: 31%; top: 12%; width: 10%; }
.ov-avid-35       { left: 36%; top: 12%; width: 10%; }
.ov-avid-68       { left: 41%; top: 12%; width: 10%; }
.ov-avid-912      { left: 46%; top: 12%; width: 10%; }
.ov-flower        { left: 16%; top: 71%; width: 6%; }
.ov-songbridge    { left: 9%;  top: 38%; width: 10%; }

/* Make sure the stage is the positioning context */
#stage {
  position: relative;
  min-height: 100vh;
  background: url('/images/hub-background.webp') center/cover no-repeat, 
              url('/images/hub-background.png') center/cover no-repeat;
  overflow: hidden;
}

/* Keep onboarding text readable but not blocking */
.welcome .card {
  backdrop-filter: blur(3px);
  background: color-mix(in srgb, #ffffff 78%, transparent);
  border-radius: 12px;
  z-index: 5;
}
.zone {
  font-size: 0;   /* hides stray text labels */
  color: transparent;
}
/* Toggle to hide crane animation overlay */
.cranes-off .paths {
  display: none !important;
}
#toggle-cranes {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 9999;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  border: none;
  padding: 10px 14px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  font-family: sans-serif;
}

#toggle-cranes:hover {
  background: rgba(0, 0, 0, 0.9);
}
/* Hide by default */
#toggle-cranes {
  display: none;
}

/* Show only when ?dev=1 is active */
.dev #toggle-cranes {
  display: block;
}
